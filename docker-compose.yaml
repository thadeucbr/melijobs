version: '3.9'

services:
  postgres:
    image: postgres
    container_name: database_pg
    restart: always
    environment:
      POSTGRES_PASSWORD: "admin"
      POSTGRES_USER: "admin"
    logging:
      driver: none
    ports:
      - 5432:5432
    volumes:
      - .:/usr/db/pg

  mongo:
    image: mongo
    restart: always
    container_name: database_mongo
    logging:
      driver: none
    ports:
      - 27017:27017

  # whatsapp:
  #   image: openwa/wa-automate
  #   container_name: whatsapp
  #   restart: always
  #   ports:
  #     - 3339:3339
  #   environment:
  #     - WA_PORT=3339
  
  vagas:
    image: node:latest
    container_name: vagas
    restart: always
    ports:
      - 3334:3334
    volumes:
      - ./api/vagas:/usr/app/vagas
    working_dir: /usr/app/vagas
    command: bash -c "apt-get install ca-certificates fonts-liberation libappindicator3-1 libasound2 libatk-bridge2.0-0 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgbm1 libgcc1 libglib2.0-0 libgtk-3-0 libnspr4 libnss3 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 lsb-release wget xdg-utils && npm install && npm start"

  # gateway:
  #   image: node:16
  #   container_name: gateway
  #   restart: always
  #   ports:
  #     - 7777:7777
  #   volumes:
  #     - ./api/gateway:/usr/app/gateway
  #   working_dir: /usr/app/gateway
  #   command: bash -c "npm install && npm start"
  
  # loteria:
  #   image: node:16
  #   container_name: loteria
  #   restart: always
  #   ports:
  #     - 3331:3331
  #   volumes:
  #     - ./api/loterias:/usr/app/loterias
  #   working_dir: /usr/app/loterias
  #   command: bash -c "npm install && npm run dev"